<!DOCTYPE html>
<html>
<head>
  <title>MapLibre Package Test</title>
  <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.0.0/dist/maplibre-gl.css" />
  <style>
    #map { width: 800px; height: 600px; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/maplibre-gl@4.0.0/dist/maplibre-gl.js"></script>
  <script type="importmap">
    {
      "imports": {
        "pmtiles": "https://esm.sh/pmtiles@3.0.0",
        "@india-boundary-corrector/data": "/packages/data/index.js",
        "@india-boundary-corrector/layer-configs": "/packages/layer-configs/src/index.js",
        "@india-boundary-corrector/maplibre": "/packages/maplibre/src/index.js"
      }
    }
  </script>
  <script type="module">
    import { Protocol } from 'pmtiles';
    import { 
      BoundaryCorrector, 
      addBoundaryCorrector, 
      removeBoundaryCorrector,
      layerConfigs,
      getPmtilesUrl
    } from '@india-boundary-corrector/maplibre';
    
    // Register PMTiles protocol
    const protocol = new Protocol();
    maplibregl.addProtocol('pmtiles', protocol.tile);
    
    // Expose for testing
    window.maplibrePackage = {
      BoundaryCorrector,
      addBoundaryCorrector,
      removeBoundaryCorrector,
      layerConfigs,
      getPmtilesUrl
    };
    
    window.maplibregl = maplibregl;
    window.maplibreLoaded = true;
  </script>
</body>
</html>
